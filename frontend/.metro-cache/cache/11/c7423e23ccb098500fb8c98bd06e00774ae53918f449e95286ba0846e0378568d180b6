{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // PRODUCTION URL - hardcoded to ensure correct backend\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://battle-buddies-28.preview.emergentagent.com';\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          return {\n            success: false,\n            error: error.detail || 'Login failed'\n          };\n        }\n        const data = await response.json();\n        setToken(data.access_token);\n        setUser(data.user);\n        await AsyncStorage.default.setItem('auth_token', data.access_token);\n        await AsyncStorage.default.setItem('auth_user', JSON.stringify(data.user));\n        return {\n          success: true\n        };\n      } catch (error) {\n        console.error('Login error:', error);\n        return {\n          success: false,\n          error: 'Network error. Please try again.'\n        };\n      }\n    };\n    const logout = async () => {\n      setToken(null);\n      setUser(null);\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"mX4/AXRUN66G8j/NKXHYWKblzjI=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":119,"map":[[15,2,24,0,"exports"],[15,9,24,0],[15,10,24,0,"AuthProvider"],[15,22,24,0],[15,25,24,0,"AuthProvider"],[15,37,24,0],[16,2,87,0,"exports"],[16,9,87,0],[16,10,87,0,"useAuth"],[16,17,87,0],[16,20,87,0,"useAuth"],[16,27,87,0],[17,2,93,1],[17,6,93,1,"_expoVirtualEnv"],[17,21,93,1],[17,24,93,1,"require"],[17,31,93,1],[17,32,93,1,"_dependencyMap"],[17,46,93,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,2,69],[21,6,2,69,"_reactJsxDevRuntime"],[21,25,2,69],[21,28,2,69,"require"],[21,35,2,69],[21,36,2,69,"_dependencyMap"],[21,50,2,69],[22,2,19,0],[22,8,19,6,"AuthContext"],[22,19,19,17],[22,35,19,20],[22,39,19,20,"createContext"],[22,45,19,33],[22,46,19,33,"createContext"],[22,59,19,33],[22,61,19,63,"undefined"],[22,70,19,72],[22,71,19,73],[24,2,21,0],[25,2,22,0],[25,8,22,6,"API_URL"],[25,15,22,13],[25,18,22,16,"_expoVirtualEnv"],[25,33,22,16],[25,34,22,16,"env"],[25,37,22,16],[25,38,22,16,"EXPO_PUBLIC_BACKEND_URL"],[25,61,22,16],[25,65,22,55],[25,118,22,108],[26,2,24,7],[26,11,24,16,"AuthProvider"],[26,23,24,28,"AuthProvider"],[26,24,24,29],[27,4,24,31,"children"],[28,2,24,65],[28,3,24,66],[28,5,24,68],[29,4,24,68,"_s"],[29,6,24,68],[30,4,25,2],[30,10,25,8],[30,11,25,9,"user"],[30,15,25,13],[30,17,25,15,"setUser"],[30,24,25,22],[30,25,25,23],[30,28,25,26],[30,32,25,26,"useState"],[30,38,25,34],[30,39,25,34,"useState"],[30,47,25,34],[30,49,25,48],[30,53,25,52],[30,54,25,53],[31,4,26,2],[31,10,26,8],[31,11,26,9,"token"],[31,16,26,14],[31,18,26,16,"setToken"],[31,26,26,24],[31,27,26,25],[31,30,26,28],[31,34,26,28,"useState"],[31,40,26,36],[31,41,26,36,"useState"],[31,49,26,36],[31,51,26,52],[31,55,26,56],[31,56,26,57],[32,4,27,2],[32,10,27,8],[32,11,27,9,"isLoading"],[32,20,27,18],[32,22,27,20,"setIsLoading"],[32,34,27,32],[32,35,27,33],[32,38,27,36],[32,42,27,36,"useState"],[32,48,27,44],[32,49,27,44,"useState"],[32,57,27,44],[32,59,27,45],[32,63,27,49],[32,64,27,50],[33,4,29,2],[33,8,29,2,"useEffect"],[33,14,29,11],[33,15,29,11,"useEffect"],[33,24,29,11],[33,26,29,12],[33,32,29,18],[34,6,30,4,"loadStoredAuth"],[34,20,30,18],[34,21,30,19],[34,22,30,20],[35,4,31,2],[35,5,31,3],[35,7,31,5],[35,9,31,7],[35,10,31,8],[36,4,33,2],[36,10,33,8,"loadStoredAuth"],[36,24,33,22],[36,27,33,25],[36,33,33,25,"loadStoredAuth"],[36,34,33,25],[36,39,33,37],[37,6,34,4],[37,10,34,8],[38,8,35,6],[38,14,35,12,"storedToken"],[38,25,35,23],[38,28,35,26],[38,34,35,32,"AsyncStorage"],[38,46,35,44],[38,47,35,44,"default"],[38,54,35,44],[38,55,35,45,"getItem"],[38,62,35,52],[38,63,35,53],[38,75,35,65],[38,76,35,66],[39,8,36,6],[39,14,36,12,"storedUser"],[39,24,36,22],[39,27,36,25],[39,33,36,31,"AsyncStorage"],[39,45,36,43],[39,46,36,43,"default"],[39,53,36,43],[39,54,36,44,"getItem"],[39,61,36,51],[39,62,36,52],[39,73,36,63],[39,74,36,64],[40,8,37,6],[40,12,37,10,"storedToken"],[40,23,37,21],[40,27,37,25,"storedUser"],[40,37,37,35],[40,39,37,37],[41,10,38,8,"setToken"],[41,18,38,16],[41,19,38,17,"storedToken"],[41,30,38,28],[41,31,38,29],[42,10,39,8,"setUser"],[42,17,39,15],[42,18,39,16,"JSON"],[42,22,39,20],[42,23,39,21,"parse"],[42,28,39,26],[42,29,39,27,"storedUser"],[42,39,39,37],[42,40,39,38],[42,41,39,39],[43,8,40,6],[44,6,41,4],[44,7,41,5],[44,8,41,6],[44,15,41,13,"error"],[44,20,41,18],[44,22,41,20],[45,8,42,6,"console"],[45,15,42,13],[45,16,42,14,"error"],[45,21,42,19],[45,22,42,20],[45,43,42,41],[45,45,42,43,"error"],[45,50,42,48],[45,51,42,49],[46,6,43,4],[46,7,43,5],[46,16,43,14],[47,8,44,6,"setIsLoading"],[47,20,44,18],[47,21,44,19],[47,26,44,24],[47,27,44,25],[48,6,45,4],[49,4,46,2],[49,5,46,3],[50,4,48,2],[50,10,48,8,"login"],[50,15,48,13],[50,18,48,16],[50,24,48,16,"login"],[50,25,48,23,"email"],[50,30,48,36],[50,32,48,38,"password"],[50,40,48,54],[50,45,48,59],[51,6,49,4],[51,10,49,8],[52,8,50,6],[52,14,50,12,"response"],[52,22,50,20],[52,25,50,23],[52,31,50,29,"fetch"],[52,36,50,34],[52,37,50,35],[52,40,50,38,"API_URL"],[52,47,50,45],[52,64,50,62],[52,66,50,64],[53,10,51,8,"method"],[53,16,51,14],[53,18,51,16],[53,24,51,22],[54,10,52,8,"headers"],[54,17,52,15],[54,19,52,17],[55,12,52,19],[55,26,52,33],[55,28,52,35],[56,10,52,54],[56,11,52,55],[57,10,53,8,"body"],[57,14,53,12],[57,16,53,14,"JSON"],[57,20,53,18],[57,21,53,19,"stringify"],[57,30,53,28],[57,31,53,29],[58,12,53,31,"email"],[58,17,53,36],[59,12,53,38,"password"],[60,10,53,47],[60,11,53,48],[61,8,54,6],[61,9,54,7],[61,10,54,8],[62,8,56,6],[62,12,56,10],[62,13,56,11,"response"],[62,21,56,19],[62,22,56,20,"ok"],[62,24,56,22],[62,26,56,24],[63,10,57,8],[63,16,57,14,"error"],[63,21,57,19],[63,24,57,22],[63,30,57,28,"response"],[63,38,57,36],[63,39,57,37,"json"],[63,43,57,41],[63,44,57,42],[63,45,57,43],[64,10,58,8],[64,17,58,15],[65,12,58,17,"success"],[65,19,58,24],[65,21,58,26],[65,26,58,31],[66,12,58,33,"error"],[66,17,58,38],[66,19,58,40,"error"],[66,24,58,45],[66,25,58,46,"detail"],[66,31,58,52],[66,35,58,56],[67,10,58,71],[67,11,58,72],[68,8,59,6],[69,8,61,6],[69,14,61,12,"data"],[69,18,61,16],[69,21,61,19],[69,27,61,25,"response"],[69,35,61,33],[69,36,61,34,"json"],[69,40,61,38],[69,41,61,39],[69,42,61,40],[70,8,62,6,"setToken"],[70,16,62,14],[70,17,62,15,"data"],[70,21,62,19],[70,22,62,20,"access_token"],[70,34,62,32],[70,35,62,33],[71,8,63,6,"setUser"],[71,15,63,13],[71,16,63,14,"data"],[71,20,63,18],[71,21,63,19,"user"],[71,25,63,23],[71,26,63,24],[72,8,64,6],[72,14,64,12,"AsyncStorage"],[72,26,64,24],[72,27,64,24,"default"],[72,34,64,24],[72,35,64,25,"setItem"],[72,42,64,32],[72,43,64,33],[72,55,64,45],[72,57,64,47,"data"],[72,61,64,51],[72,62,64,52,"access_token"],[72,74,64,64],[72,75,64,65],[73,8,65,6],[73,14,65,12,"AsyncStorage"],[73,26,65,24],[73,27,65,24,"default"],[73,34,65,24],[73,35,65,25,"setItem"],[73,42,65,32],[73,43,65,33],[73,54,65,44],[73,56,65,46,"JSON"],[73,60,65,50],[73,61,65,51,"stringify"],[73,70,65,60],[73,71,65,61,"data"],[73,75,65,65],[73,76,65,66,"user"],[73,80,65,70],[73,81,65,71],[73,82,65,72],[74,8,66,6],[74,15,66,13],[75,10,66,15,"success"],[75,17,66,22],[75,19,66,24],[76,8,66,29],[76,9,66,30],[77,6,67,4],[77,7,67,5],[77,8,67,6],[77,15,67,13,"error"],[77,20,67,18],[77,22,67,20],[78,8,68,6,"console"],[78,15,68,13],[78,16,68,14,"error"],[78,21,68,19],[78,22,68,20],[78,36,68,34],[78,38,68,36,"error"],[78,43,68,41],[78,44,68,42],[79,8,69,6],[79,15,69,13],[80,10,69,15,"success"],[80,17,69,22],[80,19,69,24],[80,24,69,29],[81,10,69,31,"error"],[81,15,69,36],[81,17,69,38],[82,8,69,73],[82,9,69,74],[83,6,70,4],[84,4,71,2],[84,5,71,3],[85,4,73,2],[85,10,73,8,"logout"],[85,16,73,14],[85,19,73,17],[85,25,73,17,"logout"],[85,26,73,17],[85,31,73,29],[86,6,74,4,"setToken"],[86,14,74,12],[86,15,74,13],[86,19,74,17],[86,20,74,18],[87,6,75,4,"setUser"],[87,13,75,11],[87,14,75,12],[87,18,75,16],[87,19,75,17],[88,6,76,4],[88,12,76,10,"AsyncStorage"],[88,24,76,22],[88,25,76,22,"default"],[88,32,76,22],[88,33,76,23,"removeItem"],[88,43,76,33],[88,44,76,34],[88,56,76,46],[88,57,76,47],[89,6,77,4],[89,12,77,10,"AsyncStorage"],[89,24,77,22],[89,25,77,22,"default"],[89,32,77,22],[89,33,77,23,"removeItem"],[89,43,77,33],[89,44,77,34],[89,55,77,45],[89,56,77,46],[90,4,78,2],[90,5,78,3],[91,4,80,2],[91,24,81,4],[91,28,81,4,"_reactJsxDevRuntime"],[91,47,81,4],[91,48,81,4,"jsxDEV"],[91,54,81,4],[91,56,81,5,"AuthContext"],[91,67,81,16],[91,68,81,17,"Provider"],[91,76,81,25],[92,6,81,26,"value"],[92,11,81,31],[92,13,81,33],[93,8,81,35,"user"],[93,12,81,39],[94,8,81,41,"token"],[94,13,81,46],[95,8,81,48,"isLoading"],[95,17,81,57],[96,8,81,59,"login"],[96,13,81,64],[97,8,81,66,"logout"],[98,6,81,73],[98,7,81,75],[99,6,81,75,"children"],[99,14,81,75],[99,16,82,7,"children"],[100,4,82,15],[101,6,82,15,"fileName"],[101,14,82,15],[101,16,82,15,"_jsxFileName"],[101,28,82,15],[102,6,82,15,"lineNumber"],[102,16,82,15],[103,6,82,15,"columnNumber"],[103,18,82,15],[104,4,82,15],[104,11,83,26],[104,12,83,27],[105,2,85,0],[106,2,85,1,"_s"],[106,4,85,1],[106,5,24,16,"AuthProvider"],[106,17,24,28],[107,2,24,28,"_c"],[107,4,24,28],[107,7,24,16,"AuthProvider"],[107,19,24,28],[108,2,87,7],[108,11,87,16,"useAuth"],[108,18,87,23,"useAuth"],[108,19,87,23],[108,21,87,26],[109,4,87,26,"_s2"],[109,7,87,26],[110,4,88,2],[110,10,88,8,"context"],[110,17,88,15],[110,20,88,18],[110,24,88,18,"useContext"],[110,30,88,28],[110,31,88,28,"useContext"],[110,41,88,28],[110,43,88,29,"AuthContext"],[110,54,88,40],[110,55,88,41],[111,4,89,2],[111,8,89,6,"context"],[111,15,89,13],[111,20,89,18,"undefined"],[111,29,89,27],[111,31,89,29],[112,6,90,4],[112,12,90,10],[112,16,90,14,"Error"],[112,21,90,19],[112,22,90,20],[112,67,90,65],[112,68,90,66],[113,4,91,2],[114,4,92,2],[114,11,92,9,"context"],[114,18,92,16],[115,2,93,0],[116,2,93,1,"_s2"],[116,5,93,1],[116,6,87,16,"useAuth"],[116,13,87,23],[117,2,87,23],[117,6,87,23,"_c"],[117,8,87,23],[118,2,87,23,"$RefreshReg$"],[118,14,87,23],[118,15,87,23,"_c"],[118,17,87,23],[119,0,87,23],[119,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;OCuB;YCK;GDE;yBEE;GFa;gBGE;GHuB;iBIE;GJK;CDO;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}