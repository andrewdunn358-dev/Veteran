{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'https://veterans-support-api.onrender.com';\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          return {\n            success: false,\n            error: error.detail || 'Login failed'\n          };\n        }\n        const data = await response.json();\n        setToken(data.access_token);\n        setUser(data.user);\n        await AsyncStorage.default.setItem('auth_token', data.access_token);\n        await AsyncStorage.default.setItem('auth_user', JSON.stringify(data.user));\n        return {\n          success: true\n        };\n      } catch (error) {\n        console.error('Login error:', error);\n        return {\n          success: false,\n          error: 'Network error. Please try again.'\n        };\n      }\n    };\n    const logout = async () => {\n      setToken(null);\n      setUser(null);\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":107,"map":[[13,2,23,0,"exports"],[13,9,23,0],[13,10,23,0,"AuthProvider"],[13,22,23,0],[13,25,23,0,"AuthProvider"],[13,37,23,0],[14,2,86,0,"exports"],[14,9,86,0],[14,10,86,0,"useAuth"],[14,17,86,0],[14,20,86,0,"useAuth"],[14,27,86,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,2,69],[18,6,2,69,"_reactJsxDevRuntime"],[18,25,2,69],[18,28,2,69,"require"],[18,35,2,69],[18,36,2,69,"_dependencyMap"],[18,50,2,69],[19,2,19,0],[19,8,19,6,"AuthContext"],[19,19,19,17],[19,35,19,20],[19,39,19,20,"createContext"],[19,45,19,33],[19,46,19,33,"createContext"],[19,59,19,33],[19,61,19,63,"undefined"],[19,70,19,72],[19,71,19,73],[20,2,21,0],[20,8,21,6,"API_URL"],[20,15,21,13],[20,18,21,16,"process"],[20,25,21,23],[20,26,21,24,"env"],[20,29,21,27],[20,30,21,28,"EXPO_PUBLIC_BACKEND_URL"],[20,53,21,51],[20,57,21,55],[20,100,21,98],[21,2,23,7],[21,11,23,16,"AuthProvider"],[21,23,23,28,"AuthProvider"],[21,24,23,29],[22,4,23,31,"children"],[23,2,23,65],[23,3,23,66],[23,5,23,68],[24,4,24,2],[24,10,24,8],[24,11,24,9,"user"],[24,15,24,13],[24,17,24,15,"setUser"],[24,24,24,22],[24,25,24,23],[24,28,24,26],[24,32,24,26,"useState"],[24,38,24,34],[24,39,24,34,"useState"],[24,47,24,34],[24,49,24,48],[24,53,24,52],[24,54,24,53],[25,4,25,2],[25,10,25,8],[25,11,25,9,"token"],[25,16,25,14],[25,18,25,16,"setToken"],[25,26,25,24],[25,27,25,25],[25,30,25,28],[25,34,25,28,"useState"],[25,40,25,36],[25,41,25,36,"useState"],[25,49,25,36],[25,51,25,52],[25,55,25,56],[25,56,25,57],[26,4,26,2],[26,10,26,8],[26,11,26,9,"isLoading"],[26,20,26,18],[26,22,26,20,"setIsLoading"],[26,34,26,32],[26,35,26,33],[26,38,26,36],[26,42,26,36,"useState"],[26,48,26,44],[26,49,26,44,"useState"],[26,57,26,44],[26,59,26,45],[26,63,26,49],[26,64,26,50],[27,4,28,2],[27,8,28,2,"useEffect"],[27,14,28,11],[27,15,28,11,"useEffect"],[27,24,28,11],[27,26,28,12],[27,32,28,18],[28,6,29,4,"loadStoredAuth"],[28,20,29,18],[28,21,29,19],[28,22,29,20],[29,4,30,2],[29,5,30,3],[29,7,30,5],[29,9,30,7],[29,10,30,8],[30,4,32,2],[30,10,32,8,"loadStoredAuth"],[30,24,32,22],[30,27,32,25],[30,33,32,25,"loadStoredAuth"],[30,34,32,25],[30,39,32,37],[31,6,33,4],[31,10,33,8],[32,8,34,6],[32,14,34,12,"storedToken"],[32,25,34,23],[32,28,34,26],[32,34,34,32,"AsyncStorage"],[32,46,34,44],[32,47,34,44,"default"],[32,54,34,44],[32,55,34,45,"getItem"],[32,62,34,52],[32,63,34,53],[32,75,34,65],[32,76,34,66],[33,8,35,6],[33,14,35,12,"storedUser"],[33,24,35,22],[33,27,35,25],[33,33,35,31,"AsyncStorage"],[33,45,35,43],[33,46,35,43,"default"],[33,53,35,43],[33,54,35,44,"getItem"],[33,61,35,51],[33,62,35,52],[33,73,35,63],[33,74,35,64],[34,8,36,6],[34,12,36,10,"storedToken"],[34,23,36,21],[34,27,36,25,"storedUser"],[34,37,36,35],[34,39,36,37],[35,10,37,8,"setToken"],[35,18,37,16],[35,19,37,17,"storedToken"],[35,30,37,28],[35,31,37,29],[36,10,38,8,"setUser"],[36,17,38,15],[36,18,38,16,"JSON"],[36,22,38,20],[36,23,38,21,"parse"],[36,28,38,26],[36,29,38,27,"storedUser"],[36,39,38,37],[36,40,38,38],[36,41,38,39],[37,8,39,6],[38,6,40,4],[38,7,40,5],[38,8,40,6],[38,15,40,13,"error"],[38,20,40,18],[38,22,40,20],[39,8,41,6,"console"],[39,15,41,13],[39,16,41,14,"error"],[39,21,41,19],[39,22,41,20],[39,43,41,41],[39,45,41,43,"error"],[39,50,41,48],[39,51,41,49],[40,6,42,4],[40,7,42,5],[40,16,42,14],[41,8,43,6,"setIsLoading"],[41,20,43,18],[41,21,43,19],[41,26,43,24],[41,27,43,25],[42,6,44,4],[43,4,45,2],[43,5,45,3],[44,4,47,2],[44,10,47,8,"login"],[44,15,47,13],[44,18,47,16],[44,24,47,16,"login"],[44,25,47,23,"email"],[44,30,47,36],[44,32,47,38,"password"],[44,40,47,54],[44,45,47,59],[45,6,48,4],[45,10,48,8],[46,8,49,6],[46,14,49,12,"response"],[46,22,49,20],[46,25,49,23],[46,31,49,29,"fetch"],[46,36,49,34],[46,37,49,35],[46,40,49,38,"API_URL"],[46,47,49,45],[46,64,49,62],[46,66,49,64],[47,10,50,8,"method"],[47,16,50,14],[47,18,50,16],[47,24,50,22],[48,10,51,8,"headers"],[48,17,51,15],[48,19,51,17],[49,12,51,19],[49,26,51,33],[49,28,51,35],[50,10,51,54],[50,11,51,55],[51,10,52,8,"body"],[51,14,52,12],[51,16,52,14,"JSON"],[51,20,52,18],[51,21,52,19,"stringify"],[51,30,52,28],[51,31,52,29],[52,12,52,31,"email"],[52,17,52,36],[53,12,52,38,"password"],[54,10,52,47],[54,11,52,48],[55,8,53,6],[55,9,53,7],[55,10,53,8],[56,8,55,6],[56,12,55,10],[56,13,55,11,"response"],[56,21,55,19],[56,22,55,20,"ok"],[56,24,55,22],[56,26,55,24],[57,10,56,8],[57,16,56,14,"error"],[57,21,56,19],[57,24,56,22],[57,30,56,28,"response"],[57,38,56,36],[57,39,56,37,"json"],[57,43,56,41],[57,44,56,42],[57,45,56,43],[58,10,57,8],[58,17,57,15],[59,12,57,17,"success"],[59,19,57,24],[59,21,57,26],[59,26,57,31],[60,12,57,33,"error"],[60,17,57,38],[60,19,57,40,"error"],[60,24,57,45],[60,25,57,46,"detail"],[60,31,57,52],[60,35,57,56],[61,10,57,71],[61,11,57,72],[62,8,58,6],[63,8,60,6],[63,14,60,12,"data"],[63,18,60,16],[63,21,60,19],[63,27,60,25,"response"],[63,35,60,33],[63,36,60,34,"json"],[63,40,60,38],[63,41,60,39],[63,42,60,40],[64,8,61,6,"setToken"],[64,16,61,14],[64,17,61,15,"data"],[64,21,61,19],[64,22,61,20,"access_token"],[64,34,61,32],[64,35,61,33],[65,8,62,6,"setUser"],[65,15,62,13],[65,16,62,14,"data"],[65,20,62,18],[65,21,62,19,"user"],[65,25,62,23],[65,26,62,24],[66,8,63,6],[66,14,63,12,"AsyncStorage"],[66,26,63,24],[66,27,63,24,"default"],[66,34,63,24],[66,35,63,25,"setItem"],[66,42,63,32],[66,43,63,33],[66,55,63,45],[66,57,63,47,"data"],[66,61,63,51],[66,62,63,52,"access_token"],[66,74,63,64],[66,75,63,65],[67,8,64,6],[67,14,64,12,"AsyncStorage"],[67,26,64,24],[67,27,64,24,"default"],[67,34,64,24],[67,35,64,25,"setItem"],[67,42,64,32],[67,43,64,33],[67,54,64,44],[67,56,64,46,"JSON"],[67,60,64,50],[67,61,64,51,"stringify"],[67,70,64,60],[67,71,64,61,"data"],[67,75,64,65],[67,76,64,66,"user"],[67,80,64,70],[67,81,64,71],[67,82,64,72],[68,8,65,6],[68,15,65,13],[69,10,65,15,"success"],[69,17,65,22],[69,19,65,24],[70,8,65,29],[70,9,65,30],[71,6,66,4],[71,7,66,5],[71,8,66,6],[71,15,66,13,"error"],[71,20,66,18],[71,22,66,20],[72,8,67,6,"console"],[72,15,67,13],[72,16,67,14,"error"],[72,21,67,19],[72,22,67,20],[72,36,67,34],[72,38,67,36,"error"],[72,43,67,41],[72,44,67,42],[73,8,68,6],[73,15,68,13],[74,10,68,15,"success"],[74,17,68,22],[74,19,68,24],[74,24,68,29],[75,10,68,31,"error"],[75,15,68,36],[75,17,68,38],[76,8,68,73],[76,9,68,74],[77,6,69,4],[78,4,70,2],[78,5,70,3],[79,4,72,2],[79,10,72,8,"logout"],[79,16,72,14],[79,19,72,17],[79,25,72,17,"logout"],[79,26,72,17],[79,31,72,29],[80,6,73,4,"setToken"],[80,14,73,12],[80,15,73,13],[80,19,73,17],[80,20,73,18],[81,6,74,4,"setUser"],[81,13,74,11],[81,14,74,12],[81,18,74,16],[81,19,74,17],[82,6,75,4],[82,12,75,10,"AsyncStorage"],[82,24,75,22],[82,25,75,22,"default"],[82,32,75,22],[82,33,75,23,"removeItem"],[82,43,75,33],[82,44,75,34],[82,56,75,46],[82,57,75,47],[83,6,76,4],[83,12,76,10,"AsyncStorage"],[83,24,76,22],[83,25,76,22,"default"],[83,32,76,22],[83,33,76,23,"removeItem"],[83,43,76,33],[83,44,76,34],[83,55,76,45],[83,56,76,46],[84,4,77,2],[84,5,77,3],[85,4,79,2],[85,24,80,4],[85,28,80,4,"_reactJsxDevRuntime"],[85,47,80,4],[85,48,80,4,"jsxDEV"],[85,54,80,4],[85,56,80,5,"AuthContext"],[85,67,80,16],[85,68,80,17,"Provider"],[85,76,80,25],[86,6,80,26,"value"],[86,11,80,31],[86,13,80,33],[87,8,80,35,"user"],[87,12,80,39],[88,8,80,41,"token"],[88,13,80,46],[89,8,80,48,"isLoading"],[89,17,80,57],[90,8,80,59,"login"],[90,13,80,64],[91,8,80,66,"logout"],[92,6,80,73],[92,7,80,75],[93,6,80,75,"children"],[93,14,80,75],[93,16,81,7,"children"],[94,4,81,15],[95,6,81,15,"fileName"],[95,14,81,15],[95,16,81,15,"_jsxFileName"],[95,28,81,15],[96,6,81,15,"lineNumber"],[96,16,81,15],[97,6,81,15,"columnNumber"],[97,18,81,15],[98,4,81,15],[98,11,82,26],[98,12,82,27],[99,2,84,0],[100,2,86,7],[100,11,86,16,"useAuth"],[100,18,86,23,"useAuth"],[100,19,86,23],[100,21,86,26],[101,4,87,2],[101,10,87,8,"context"],[101,17,87,15],[101,20,87,18],[101,24,87,18,"useContext"],[101,30,87,28],[101,31,87,28,"useContext"],[101,41,87,28],[101,43,87,29,"AuthContext"],[101,54,87,40],[101,55,87,41],[102,4,88,2],[102,8,88,6,"context"],[102,15,88,13],[102,20,88,18,"undefined"],[102,29,88,27],[102,31,88,29],[103,6,89,4],[103,12,89,10],[103,16,89,14,"Error"],[103,21,89,19],[103,22,89,20],[103,67,89,65],[103,68,89,66],[104,4,90,2],[105,4,91,2],[105,11,91,9,"context"],[105,18,91,16],[106,2,92,0],[107,0,92,1],[107,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;OCsB;YCK;GDE;yBEE;GFa;gBGE;GHuB;iBIE;GJK;CDO;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}