{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // PRODUCTION URL - hardcoded to ensure correct backend\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'https://veteran-support-app.preview.emergentagent.com';\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        const storedUser = await AsyncStorage.default.getItem('auth_user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (error) {\n        console.error('Error loading auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await fetch(`${API_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        if (!response.ok) {\n          const error = await response.json();\n          return {\n            success: false,\n            error: error.detail || 'Login failed'\n          };\n        }\n        const data = await response.json();\n        setToken(data.access_token);\n        setUser(data.user);\n        await AsyncStorage.default.setItem('auth_token', data.access_token);\n        await AsyncStorage.default.setItem('auth_user', JSON.stringify(data.user));\n        return {\n          success: true\n        };\n      } catch (error) {\n        console.error('Login error:', error);\n        return {\n          success: false,\n          error: 'Network error. Please try again.'\n        };\n      }\n    };\n    const logout = async () => {\n      setToken(null);\n      setUser(null);\n      await AsyncStorage.default.removeItem('auth_token');\n      await AsyncStorage.default.removeItem('auth_user');\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        login,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":109,"map":[[13,2,24,0,"exports"],[13,9,24,0],[13,10,24,0,"AuthProvider"],[13,22,24,0],[13,25,24,0,"AuthProvider"],[13,37,24,0],[14,2,87,0,"exports"],[14,9,87,0],[14,10,87,0,"useAuth"],[14,17,87,0],[14,20,87,0,"useAuth"],[14,27,87,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,2,69],[18,6,2,69,"_reactJsxDevRuntime"],[18,25,2,69],[18,28,2,69,"require"],[18,35,2,69],[18,36,2,69,"_dependencyMap"],[18,50,2,69],[19,2,19,0],[19,8,19,6,"AuthContext"],[19,19,19,17],[19,35,19,20],[19,39,19,20,"createContext"],[19,45,19,33],[19,46,19,33,"createContext"],[19,59,19,33],[19,61,19,63,"undefined"],[19,70,19,72],[19,71,19,73],[21,2,21,0],[22,2,22,0],[22,8,22,6,"API_URL"],[22,15,22,13],[22,18,22,16,"process"],[22,25,22,23],[22,26,22,24,"env"],[22,29,22,27],[22,30,22,28,"EXPO_PUBLIC_BACKEND_URL"],[22,53,22,51],[22,57,22,55],[22,112,22,110],[23,2,24,7],[23,11,24,16,"AuthProvider"],[23,23,24,28,"AuthProvider"],[23,24,24,29],[24,4,24,31,"children"],[25,2,24,65],[25,3,24,66],[25,5,24,68],[26,4,25,2],[26,10,25,8],[26,11,25,9,"user"],[26,15,25,13],[26,17,25,15,"setUser"],[26,24,25,22],[26,25,25,23],[26,28,25,26],[26,32,25,26,"useState"],[26,38,25,34],[26,39,25,34,"useState"],[26,47,25,34],[26,49,25,48],[26,53,25,52],[26,54,25,53],[27,4,26,2],[27,10,26,8],[27,11,26,9,"token"],[27,16,26,14],[27,18,26,16,"setToken"],[27,26,26,24],[27,27,26,25],[27,30,26,28],[27,34,26,28,"useState"],[27,40,26,36],[27,41,26,36,"useState"],[27,49,26,36],[27,51,26,52],[27,55,26,56],[27,56,26,57],[28,4,27,2],[28,10,27,8],[28,11,27,9,"isLoading"],[28,20,27,18],[28,22,27,20,"setIsLoading"],[28,34,27,32],[28,35,27,33],[28,38,27,36],[28,42,27,36,"useState"],[28,48,27,44],[28,49,27,44,"useState"],[28,57,27,44],[28,59,27,45],[28,63,27,49],[28,64,27,50],[29,4,29,2],[29,8,29,2,"useEffect"],[29,14,29,11],[29,15,29,11,"useEffect"],[29,24,29,11],[29,26,29,12],[29,32,29,18],[30,6,30,4,"loadStoredAuth"],[30,20,30,18],[30,21,30,19],[30,22,30,20],[31,4,31,2],[31,5,31,3],[31,7,31,5],[31,9,31,7],[31,10,31,8],[32,4,33,2],[32,10,33,8,"loadStoredAuth"],[32,24,33,22],[32,27,33,25],[32,33,33,25,"loadStoredAuth"],[32,34,33,25],[32,39,33,37],[33,6,34,4],[33,10,34,8],[34,8,35,6],[34,14,35,12,"storedToken"],[34,25,35,23],[34,28,35,26],[34,34,35,32,"AsyncStorage"],[34,46,35,44],[34,47,35,44,"default"],[34,54,35,44],[34,55,35,45,"getItem"],[34,62,35,52],[34,63,35,53],[34,75,35,65],[34,76,35,66],[35,8,36,6],[35,14,36,12,"storedUser"],[35,24,36,22],[35,27,36,25],[35,33,36,31,"AsyncStorage"],[35,45,36,43],[35,46,36,43,"default"],[35,53,36,43],[35,54,36,44,"getItem"],[35,61,36,51],[35,62,36,52],[35,73,36,63],[35,74,36,64],[36,8,37,6],[36,12,37,10,"storedToken"],[36,23,37,21],[36,27,37,25,"storedUser"],[36,37,37,35],[36,39,37,37],[37,10,38,8,"setToken"],[37,18,38,16],[37,19,38,17,"storedToken"],[37,30,38,28],[37,31,38,29],[38,10,39,8,"setUser"],[38,17,39,15],[38,18,39,16,"JSON"],[38,22,39,20],[38,23,39,21,"parse"],[38,28,39,26],[38,29,39,27,"storedUser"],[38,39,39,37],[38,40,39,38],[38,41,39,39],[39,8,40,6],[40,6,41,4],[40,7,41,5],[40,8,41,6],[40,15,41,13,"error"],[40,20,41,18],[40,22,41,20],[41,8,42,6,"console"],[41,15,42,13],[41,16,42,14,"error"],[41,21,42,19],[41,22,42,20],[41,43,42,41],[41,45,42,43,"error"],[41,50,42,48],[41,51,42,49],[42,6,43,4],[42,7,43,5],[42,16,43,14],[43,8,44,6,"setIsLoading"],[43,20,44,18],[43,21,44,19],[43,26,44,24],[43,27,44,25],[44,6,45,4],[45,4,46,2],[45,5,46,3],[46,4,48,2],[46,10,48,8,"login"],[46,15,48,13],[46,18,48,16],[46,24,48,16,"login"],[46,25,48,23,"email"],[46,30,48,36],[46,32,48,38,"password"],[46,40,48,54],[46,45,48,59],[47,6,49,4],[47,10,49,8],[48,8,50,6],[48,14,50,12,"response"],[48,22,50,20],[48,25,50,23],[48,31,50,29,"fetch"],[48,36,50,34],[48,37,50,35],[48,40,50,38,"API_URL"],[48,47,50,45],[48,64,50,62],[48,66,50,64],[49,10,51,8,"method"],[49,16,51,14],[49,18,51,16],[49,24,51,22],[50,10,52,8,"headers"],[50,17,52,15],[50,19,52,17],[51,12,52,19],[51,26,52,33],[51,28,52,35],[52,10,52,54],[52,11,52,55],[53,10,53,8,"body"],[53,14,53,12],[53,16,53,14,"JSON"],[53,20,53,18],[53,21,53,19,"stringify"],[53,30,53,28],[53,31,53,29],[54,12,53,31,"email"],[54,17,53,36],[55,12,53,38,"password"],[56,10,53,47],[56,11,53,48],[57,8,54,6],[57,9,54,7],[57,10,54,8],[58,8,56,6],[58,12,56,10],[58,13,56,11,"response"],[58,21,56,19],[58,22,56,20,"ok"],[58,24,56,22],[58,26,56,24],[59,10,57,8],[59,16,57,14,"error"],[59,21,57,19],[59,24,57,22],[59,30,57,28,"response"],[59,38,57,36],[59,39,57,37,"json"],[59,43,57,41],[59,44,57,42],[59,45,57,43],[60,10,58,8],[60,17,58,15],[61,12,58,17,"success"],[61,19,58,24],[61,21,58,26],[61,26,58,31],[62,12,58,33,"error"],[62,17,58,38],[62,19,58,40,"error"],[62,24,58,45],[62,25,58,46,"detail"],[62,31,58,52],[62,35,58,56],[63,10,58,71],[63,11,58,72],[64,8,59,6],[65,8,61,6],[65,14,61,12,"data"],[65,18,61,16],[65,21,61,19],[65,27,61,25,"response"],[65,35,61,33],[65,36,61,34,"json"],[65,40,61,38],[65,41,61,39],[65,42,61,40],[66,8,62,6,"setToken"],[66,16,62,14],[66,17,62,15,"data"],[66,21,62,19],[66,22,62,20,"access_token"],[66,34,62,32],[66,35,62,33],[67,8,63,6,"setUser"],[67,15,63,13],[67,16,63,14,"data"],[67,20,63,18],[67,21,63,19,"user"],[67,25,63,23],[67,26,63,24],[68,8,64,6],[68,14,64,12,"AsyncStorage"],[68,26,64,24],[68,27,64,24,"default"],[68,34,64,24],[68,35,64,25,"setItem"],[68,42,64,32],[68,43,64,33],[68,55,64,45],[68,57,64,47,"data"],[68,61,64,51],[68,62,64,52,"access_token"],[68,74,64,64],[68,75,64,65],[69,8,65,6],[69,14,65,12,"AsyncStorage"],[69,26,65,24],[69,27,65,24,"default"],[69,34,65,24],[69,35,65,25,"setItem"],[69,42,65,32],[69,43,65,33],[69,54,65,44],[69,56,65,46,"JSON"],[69,60,65,50],[69,61,65,51,"stringify"],[69,70,65,60],[69,71,65,61,"data"],[69,75,65,65],[69,76,65,66,"user"],[69,80,65,70],[69,81,65,71],[69,82,65,72],[70,8,66,6],[70,15,66,13],[71,10,66,15,"success"],[71,17,66,22],[71,19,66,24],[72,8,66,29],[72,9,66,30],[73,6,67,4],[73,7,67,5],[73,8,67,6],[73,15,67,13,"error"],[73,20,67,18],[73,22,67,20],[74,8,68,6,"console"],[74,15,68,13],[74,16,68,14,"error"],[74,21,68,19],[74,22,68,20],[74,36,68,34],[74,38,68,36,"error"],[74,43,68,41],[74,44,68,42],[75,8,69,6],[75,15,69,13],[76,10,69,15,"success"],[76,17,69,22],[76,19,69,24],[76,24,69,29],[77,10,69,31,"error"],[77,15,69,36],[77,17,69,38],[78,8,69,73],[78,9,69,74],[79,6,70,4],[80,4,71,2],[80,5,71,3],[81,4,73,2],[81,10,73,8,"logout"],[81,16,73,14],[81,19,73,17],[81,25,73,17,"logout"],[81,26,73,17],[81,31,73,29],[82,6,74,4,"setToken"],[82,14,74,12],[82,15,74,13],[82,19,74,17],[82,20,74,18],[83,6,75,4,"setUser"],[83,13,75,11],[83,14,75,12],[83,18,75,16],[83,19,75,17],[84,6,76,4],[84,12,76,10,"AsyncStorage"],[84,24,76,22],[84,25,76,22,"default"],[84,32,76,22],[84,33,76,23,"removeItem"],[84,43,76,33],[84,44,76,34],[84,56,76,46],[84,57,76,47],[85,6,77,4],[85,12,77,10,"AsyncStorage"],[85,24,77,22],[85,25,77,22,"default"],[85,32,77,22],[85,33,77,23,"removeItem"],[85,43,77,33],[85,44,77,34],[85,55,77,45],[85,56,77,46],[86,4,78,2],[86,5,78,3],[87,4,80,2],[87,24,81,4],[87,28,81,4,"_reactJsxDevRuntime"],[87,47,81,4],[87,48,81,4,"jsxDEV"],[87,54,81,4],[87,56,81,5,"AuthContext"],[87,67,81,16],[87,68,81,17,"Provider"],[87,76,81,25],[88,6,81,26,"value"],[88,11,81,31],[88,13,81,33],[89,8,81,35,"user"],[89,12,81,39],[90,8,81,41,"token"],[90,13,81,46],[91,8,81,48,"isLoading"],[91,17,81,57],[92,8,81,59,"login"],[92,13,81,64],[93,8,81,66,"logout"],[94,6,81,73],[94,7,81,75],[95,6,81,75,"children"],[95,14,81,75],[95,16,82,7,"children"],[96,4,82,15],[97,6,82,15,"fileName"],[97,14,82,15],[97,16,82,15,"_jsxFileName"],[97,28,82,15],[98,6,82,15,"lineNumber"],[98,16,82,15],[99,6,82,15,"columnNumber"],[99,18,82,15],[100,4,82,15],[100,11,83,26],[100,12,83,27],[101,2,85,0],[102,2,87,7],[102,11,87,16,"useAuth"],[102,18,87,23,"useAuth"],[102,19,87,23],[102,21,87,26],[103,4,88,2],[103,10,88,8,"context"],[103,17,88,15],[103,20,88,18],[103,24,88,18,"useContext"],[103,30,88,28],[103,31,88,28,"useContext"],[103,41,88,28],[103,43,88,29,"AuthContext"],[103,54,88,40],[103,55,88,41],[104,4,89,2],[104,8,89,6,"context"],[104,15,89,13],[104,20,89,18,"undefined"],[104,29,89,27],[104,31,89,29],[105,6,90,4],[105,12,90,10],[105,16,90,14,"Error"],[105,21,90,19],[105,22,90,20],[105,67,90,65],[105,68,90,66],[106,4,91,2],[107,4,92,2],[107,11,92,9,"context"],[107,18,92,16],[108,2,93,0],[109,0,93,1],[109,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","logout","useAuth"],"mappings":"AAA;OCuB;YCK;GDE;yBEE;GFa;gBGE;GHuB;iBIE;GJK;CDO;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}